import{c as v,u as M,a as U,r as n,f as h,j as e,L as x,H as E,d as F,C as w}from"./index-sStU8Kl8.js";import{Z as $}from"./zap-B53zwkkI.js";import{L as K,a as q}from"./log-out-CcaXqMXd.js";import{C as O}from"./credit-card-CM3jrChV.js";import{U as j}from"./user-DENz1Spc.js";import{M as H,L as B}from"./mail-Dc3MzfQY.js";import{C as R,S as G}from"./save-CQQmfLX8.js";import{S as Z}from"./shield-Bbbc0QNj.js";import{T as z}from"./trending-up-CRhYWCDm.js";import{S as N}from"./sparkles-ofgnhvRy.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Y=v("calendar",V);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Q=v("key",J),oe=()=>{const y=M(),{user:l,logout:_}=U(),[r,c]=n.useState({name:"",email:"",company:"",api_key:"",subscription_tier:"",created_at:"",last_login:"",api_calls_made:0,api_calls_limit:0}),[i,p]=n.useState({current_password:"",new_password:"",confirm_password:""}),[k,b]=n.useState(!0),[d,o]=n.useState(!1),[u,a]=n.useState({type:"",text:""}),[m,P]=n.useState("profile"),[g,S]=n.useState(!1);n.useEffect(()=>{C()},[]);const C=async()=>{try{b(!0);const t=(await h.get("/auth/me")).data;c({name:t.username||"",email:t.email||"",company:t.company||"",api_key:`sk_${t.id}_${Math.random().toString(36).substr(2,9)}`,subscription_tier:t.subscription_tier||"free",created_at:t.created_at||new Date().toISOString(),last_login:new Date().toISOString(),api_calls_made:t.api_calls_this_month||0,api_calls_limit:t.api_calls_limit||100})}catch(s){console.error("Failed to fetch profile:",s),l&&c({name:l.username||"",email:l.email||"",company:l.company||"",api_key:`sk_${l.id}_${Math.random().toString(36).substr(2,9)}`,subscription_tier:l.subscription_tier||"free",created_at:l.created_at||new Date().toISOString(),last_login:new Date().toISOString(),api_calls_made:0,api_calls_limit:l.api_calls_remaining?l.api_calls_remaining+l.api_calls_this_month:100})}finally{b(!1)}},A=async s=>{s.preventDefault();try{o(!0),await h.put("/api/users/profile",{name:r.name,company:r.company}),a({type:"success",text:"Profile updated successfully!"}),setTimeout(()=>a({type:"",text:""}),3e3)}catch(t){console.error("Failed to update profile:",t),a({type:"error",text:"Failed to update profile"})}finally{o(!1)}},I=async s=>{if(s.preventDefault(),i.new_password!==i.confirm_password){a({type:"error",text:"Passwords do not match"});return}if(i.new_password.length<8){a({type:"error",text:"Password must be at least 8 characters long"});return}try{o(!0),await h.post("/api/users/change-password",{current_password:i.current_password,new_password:i.new_password}),a({type:"success",text:"Password changed successfully!"}),p({current_password:"",new_password:"",confirm_password:""}),setTimeout(()=>a({type:"",text:""}),3e3)}catch(t){console.error("Failed to change password:",t),a({type:"error",text:t.response?.data?.detail||"Failed to change password"})}finally{o(!1)}},D=async()=>{if(confirm("Are you sure you want to regenerate your API key? The old key will stop working immediately."))try{o(!0);const s=await h.post("/api/users/regenerate-api-key");c(t=>({...t,api_key:s.data.api_key})),a({type:"success",text:"API key regenerated successfully!"})}catch(s){console.error("Failed to regenerate API key:",s),a({type:"error",text:"Failed to regenerate API key"})}finally{o(!1)}},L=()=>{navigator.clipboard.writeText(r.api_key),a({type:"success",text:"API key copied to clipboard!"}),setTimeout(()=>a({type:"",text:""}),2e3)},T=()=>{const s=r.subscription_tier;return s==="enterprise"?e.jsxs("span",{className:"px-3 py-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),"Enterprise"]}):s==="pro"?e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-full text-sm font-medium",children:"Pro"}):e.jsx("span",{className:"px-3 py-1 bg-gray-600 text-white rounded-full text-sm font-medium",children:"Free"})},f=()=>r.api_calls_limit===0?0:Math.round(r.api_calls_made/r.api_calls_limit*100);return k?e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[e.jsx("header",{className:"bg-gray-800/50 backdrop-blur-lg border-b border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-4",children:[e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs(x,{to:"/",className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-8 h-8 text-purple-500"}),e.jsx("span",{className:"text-xl font-bold text-white",children:"API Orchestrator"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(x,{to:"/",className:"flex items-center space-x-2 px-4 py-2 text-gray-300 hover:text-white transition",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:"Home"})]}),e.jsxs(x,{to:"/dashboard",className:"flex items-center space-x-2 px-4 py-2 text-gray-300 hover:text-white transition",children:[e.jsx(K,{className:"w-5 h-5"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs(x,{to:"/billing",className:"flex items-center space-x-2 px-4 py-2 text-gray-300 hover:text-white transition",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"Billing"})]}),e.jsxs(x,{to:"/profile",className:"flex items-center space-x-2 px-4 py-2 text-purple-400 transition",children:[e.jsx(j,{className:"w-5 h-5"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:()=>{_(),y("/")},className:"flex items-center space-x-2 px-4 py-2 text-gray-300 hover:text-white transition",children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})]})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Account Settings"}),e.jsx("p",{className:"text-gray-400",children:"Manage your profile and security settings"})]}),T()]})}),u.text&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center gap-3 ${u.type==="success"?"bg-green-500/10 border border-green-500/30 text-green-400":"bg-red-500/10 border border-red-500/30 text-red-400"}`,children:[u.type==="success"?e.jsx(F,{className:"w-5 h-5"}):e.jsx(w,{className:"w-5 h-5"}),u.text]}),e.jsx("div",{className:"border-b border-gray-700 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:["profile","security","api","usage"].map(s=>e.jsx("button",{onClick:()=>P(s),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize transition ${m===s?"border-purple-500 text-purple-400":"border-transparent text-gray-500 hover:text-gray-300 hover:border-gray-300"}`,children:s==="api"?"API Settings":s},s))})}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur rounded-xl border border-gray-700 p-6",children:[m==="profile"&&e.jsxs("form",{onSubmit:A,children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2 text-purple-400"}),"Profile Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>c(t=>({...t,name:s.target.value})),className:"w-full px-4 py-2 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500 transition",placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Email Address"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"email",value:r.email,disabled:!0,className:"w-full px-4 py-2 bg-gray-900/50 border border-gray-700 rounded-lg text-gray-500 cursor-not-allowed"}),e.jsx(H,{className:"w-5 h-5 text-gray-500 -ml-10"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Company"}),e.jsx("input",{type:"text",value:r.company||"",onChange:s=>c(t=>({...t,company:s.target.value})),className:"w-full px-4 py-2 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500 transition",placeholder:"Enter your company name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Member Since"}),e.jsxs("div",{className:"flex items-center px-4 py-2 bg-gray-900/50 border border-gray-700 rounded-lg text-gray-400",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),new Date(r.created_at).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Last Login"}),e.jsxs("div",{className:"flex items-center px-4 py-2 bg-gray-900/50 border border-gray-700 rounded-lg text-gray-400",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),new Date(r.last_login).toLocaleDateString()]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),d?"Saving...":"Save Changes"]})})]}),m==="security"&&e.jsxs("form",{onSubmit:I,children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[e.jsx(Z,{className:"w-5 h-5 mr-2 text-purple-400"}),"Security Settings"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",value:i.current_password,onChange:s=>p(t=>({...t,current_password:s.target.value})),className:"w-full px-4 py-2 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500 transition",placeholder:"Enter your current password",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:i.new_password,onChange:s=>p(t=>({...t,new_password:s.target.value})),className:"w-full px-4 py-2 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500 transition",placeholder:"Enter your new password (min 8 characters)",minLength:"8",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:i.confirm_password,onChange:s=>p(t=>({...t,confirm_password:s.target.value})),className:"w-full px-4 py-2 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500 transition",placeholder:"Confirm your new password",required:!0})]}),e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:e.jsxs("p",{className:"text-yellow-400 text-sm",children:[e.jsx(w,{className:"w-4 h-4 inline mr-2"}),"Password requirements: At least 8 characters long"]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),d?"Changing...":"Change Password"]})})]}),m==="api"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[e.jsx(Q,{className:"w-5 h-5 mr-2 text-purple-400"}),"API Settings"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"API Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 px-4 py-2 bg-gray-900/50 border border-gray-700 rounded-lg text-white font-mono text-sm",children:g?r.api_key:"••••••••••••••••••••••••••••••••"}),e.jsx("button",{type:"button",onClick:()=>S(!g),className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition",children:g?"Hide":"Show"}),e.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition",children:"Copy"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use this API key to authenticate your requests to our API"})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Regenerate API Key"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Generate a new API key. This will immediately invalidate your current key."}),e.jsx("button",{type:"button",onClick:D,disabled:d,className:"px-4 py-2 bg-red-600/20 text-red-400 border border-red-500/50 rounded-lg hover:bg-red-600/30 transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Regenerate API Key"})]})]})]}),m==="usage"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2 text-purple-400"}),"Usage Statistics"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-400",children:"API Calls This Month"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[r.api_calls_made," / ",r.api_calls_limit||"∞"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500 transition-all duration-300",style:{width:`${f()}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:r.api_calls_limit?`${100-f()}% of monthly quota remaining`:"Unlimited API calls with your plan"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Total Projects"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"12"})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"APIs Discovered"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"248"})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Tests Generated"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"1,536"})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Upgrade Your Plan"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Need more API calls or advanced features? Upgrade to a higher tier."}),e.jsxs("button",{onClick:()=>y("/billing"),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:opacity-90 transition flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"View Plans"]})]})]})]})]})]})]})};export{oe as default};
//# sourceMappingURL=UserProfile-BaA1pHOS.js.map
